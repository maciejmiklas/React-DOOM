import WadParser, {testFunctions as tf} from "../main/wad/WadParser";

import {base64ToUint8Array} from "../main/util"
import jsonData from "./data/doom.json"

const wadBytes = base64ToUint8Array(jsonData.doom)
const iwad = [73, 87, 65, 68]

describe("parseHeader", () => {
    test("IWAD", () => {
        const header = tf.parseHeader(wadBytes);
        expect(header.identification).toEqual("IWAD")
        expect(header.numlumps).toEqual(1241)
        expect(header.infotableofs).toEqual(4205648)
    });
});


describe("parseHeadType", () => {
    test("IWAD", () => {
        expect(tf.parseHeadType(iwad)).toEqual("IWAD")
    });
});



describe("WAD Reader", () => {
    test("parse", () => {
        const wreader = WadParser.parse(wadBytes)
    });

});


